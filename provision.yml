parameters:
- name: subscriptionName
  type: string
- name: location
  type: string
- name: stage
  type: string
 
variables:
  resourceGroupName: 'AsSct-Int-RG-SKUAcquireService-${{ parameters.stage }}-Init'
  tagPlatform: 'SCT Integration'
  tagSubPlatform: 'Integration'
  tagDataClassification: 'asos-confidential'
  tagBusinessCriticality: 'business-supporting'
  tagPcode: 'P_000404'
  team: 'Nexus'
  tagStage: '{{ parameters.stage }}'
 
steps:
- task: AzureCLI@2
  displayName: Set subscription
  inputs:
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      az account set --subscription ${{ parameters.subscriptionName }}
 
- task: AzureCLI@2
  displayName: Create resource group
  inputs:
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      az group create \
      --name $(resourceGroupName) \
      --location $(location) \
      --tags platform='$(tagPlatform)' \
        sub-platform='$(tagSubPlatform)' \
        stage=$(tagStage) \
        data-classification=$(tagDataClassification) \
        business-criticality=$(tagBusinessCriticality) \
        pcode=$(pcode) \
        team=$(team)